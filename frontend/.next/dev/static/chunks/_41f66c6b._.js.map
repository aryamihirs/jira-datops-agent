{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/aryamihirs/projects/product/jira-datops-agent/frontend/lib/utils/helpers.ts"],"sourcesContent":["// Utility helper functions\n\nimport type { ConfidenceLevel, RequestPriority } from '@/lib/types';\n\nexport function getConfidenceLevel(score: number): ConfidenceLevel {\n  if (score >= 90) return 'high';\n  if (score >= 70) return 'medium';\n  return 'low';\n}\n\nexport function getConfidenceColor(level: ConfidenceLevel): string {\n  switch (level) {\n    case 'high': return 'text-green-600 bg-green-50';\n    case 'medium': return 'text-amber-600 bg-amber-50';\n    case 'low': return 'text-red-600 bg-red-50';\n  }\n}\n\nexport function getPriorityColor(priority: RequestPriority): string {\n  switch (priority) {\n    case 'highest': return 'bg-red-100 text-red-800 border-red-200';\n    case 'high': return 'bg-orange-100 text-orange-800 border-orange-200';\n    case 'medium': return 'bg-yellow-100 text-yellow-800 border-yellow-200';\n    case 'low': return 'bg-gray-100 text-gray-800 border-gray-200';\n  }\n}\n\nexport function formatTimeAgo(date: string): string {\n  const seconds = Math.floor((new Date().getTime() - new Date(date).getTime()) / 1000);\n\n  if (seconds < 60) return 'just now';\n  const minutes = Math.floor(seconds / 60);\n  if (minutes < 60) return `${minutes}m ago`;\n  const hours = Math.floor(minutes / 60);\n  if (hours < 24) return `${hours}h ago`;\n  const days = Math.floor(hours / 24);\n  return `${days}d ago`;\n}\n\nexport function cn(...classes: (string | undefined | null | false)[]): string {\n  return classes.filter(Boolean).join(' ');\n}\n"],"names":[],"mappings":"AAAA,2BAA2B;;;;;;;;;;;;;AAIpB,SAAS,mBAAmB,KAAa;IAC9C,IAAI,SAAS,IAAI,OAAO;IACxB,IAAI,SAAS,IAAI,OAAO;IACxB,OAAO;AACT;AAEO,SAAS,mBAAmB,KAAsB;IACvD,OAAQ;QACN,KAAK;YAAQ,OAAO;QACpB,KAAK;YAAU,OAAO;QACtB,KAAK;YAAO,OAAO;IACrB;AACF;AAEO,SAAS,iBAAiB,QAAyB;IACxD,OAAQ;QACN,KAAK;YAAW,OAAO;QACvB,KAAK;YAAQ,OAAO;QACpB,KAAK;YAAU,OAAO;QACtB,KAAK;YAAO,OAAO;IACrB;AACF;AAEO,SAAS,cAAc,IAAY;IACxC,MAAM,UAAU,KAAK,KAAK,CAAC,CAAC,IAAI,OAAO,OAAO,KAAK,IAAI,KAAK,MAAM,OAAO,EAAE,IAAI;IAE/E,IAAI,UAAU,IAAI,OAAO;IACzB,MAAM,UAAU,KAAK,KAAK,CAAC,UAAU;IACrC,IAAI,UAAU,IAAI,OAAO,GAAG,QAAQ,KAAK,CAAC;IAC1C,MAAM,QAAQ,KAAK,KAAK,CAAC,UAAU;IACnC,IAAI,QAAQ,IAAI,OAAO,GAAG,MAAM,KAAK,CAAC;IACtC,MAAM,OAAO,KAAK,KAAK,CAAC,QAAQ;IAChC,OAAO,GAAG,KAAK,KAAK,CAAC;AACvB;AAEO,SAAS,GAAG,GAAG,OAA8C;IAClE,OAAO,QAAQ,MAAM,CAAC,SAAS,IAAI,CAAC;AACtC"}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///Users/aryamihirs/projects/product/jira-datops-agent/frontend/lib/api/client.ts"],"sourcesContent":["// API client layer\nimport type { Request, MetricCard, ActivityItem, Connection, Pattern, ChartDataPoint } from '@/lib/types';\n\n// Base API configuration\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || '/api';\n\n// Generic fetch wrapper\nasync function apiCall<T>(endpoint: string, options?: RequestInit): Promise<T> {\n  const response = await fetch(`${API_BASE_URL}${endpoint}`, {\n    ...options,\n    headers: {\n      'Content-Type': 'application/json',\n      ...options?.headers,\n    },\n  });\n  if (!response.ok) {\n    const errorText = await response.text();\n    throw new Error(`API Error: ${response.status} ${errorText}`);\n  }\n  return response.json();\n}\n\n// API methods\nexport const api = {\n  // Dashboard endpoints\n  getDashboardMetrics: () => apiCall<MetricCard[]>('/dashboard/metrics'),\n  getRecentActivity: () => apiCall<ActivityItem[]>('/dashboard/activity'),\n  getRequestVolumeData: () => apiCall<ChartDataPoint[]>('/dashboard/request-volume'), // TODO: Implement backend\n  getRequestTypeDistribution: () => apiCall<ChartDataPoint[]>('/dashboard/request-types'), // TODO: Implement backend\n  healthCheck: () => apiCall<any>('/health'),\n\n  // Requests endpoints\n  getRequests: (filters?: { status?: string }) => {\n    const query = filters?.status ? `?status=${filters.status}` : '';\n    return apiCall<Request[]>(`/requests/${query}`);\n  },\n  getRequestById: (id: number) => apiCall<Request>(`/requests/${id}`),\n  createRequest: (data: Partial<Request>) =>\n    apiCall<Request>('/requests/', {\n      method: 'POST',\n      body: JSON.stringify(data)\n    }),\n  approveRequest: (id: number) => apiCall<void>(`/requests/${id}/approve`, { method: 'POST' }),\n  rejectRequest: (id: number) => apiCall<void>(`/requests/${id}/reject`, { method: 'POST' }),\n  updateRequest: (id: number, updates: Partial<Request>) =>\n    apiCall<Request>(`/requests/${id}`, {\n      method: 'PATCH',\n      body: JSON.stringify(updates)\n    }),\n  analyzeRequest: (description: string, files?: string[], jiraSchema?: Record<string, any>) =>\n    apiCall<any>('/requests/analyze', {\n      method: 'POST',\n      body: JSON.stringify({ description, files, jira_schema: jiraSchema })\n    }),\n\n  releaseRequests: (ids: number[]) =>\n    apiCall<{ total: number; success: number; failed: number; skipped: number; details: any[] }>('/requests/release', {\n      method: 'POST',\n      body: JSON.stringify({ request_ids: ids })\n    }),\n\n  // Connections endpoints\n  getConnections: () => apiCall<Connection[]>('/connections'),\n  createConnection: (connection: Partial<Connection>) =>\n    apiCall<Connection>('/connections', {\n      method: 'POST',\n      body: JSON.stringify(connection),\n    }),\n  updateConnection: (id: number, connection: Partial<Connection>) =>\n    apiCall<Connection>(`/connections/${id}`, {\n      method: 'PATCH',\n      body: JSON.stringify(connection),\n    }),\n  deleteConnection: (id: number) =>\n    apiCall<void>(`/connections/${id}`, {\n      method: 'DELETE',\n    }),\n\n  exportRequestsCSV: async () => {\n    const response = await fetch(`${API_BASE_URL}/requests/export/csv`);\n    if (!response.ok) {\n      throw new Error('Failed to export CSV');\n    }\n    const blob = await response.blob();\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = 'requests_export.csv';\n    document.body.appendChild(a);\n    a.click();\n    window.URL.revokeObjectURL(url);\n    document.body.removeChild(a);\n  },\n\n  // Knowledge Base Ingestion\n  ingestJiraCSV: async (file: File) => {\n    const formData = new FormData();\n    formData.append('file', file);\n    const response = await fetch(`${API_BASE_URL}/knowledge/ingest/jira-csv`, {\n      method: 'POST',\n      body: formData,\n    });\n    if (!response.ok) throw new Error(`Ingestion failed: ${response.statusText}`);\n    return response.json();\n  },\n\n  ingestDocument: async (file: File) => {\n    const formData = new FormData();\n    formData.append('file', file);\n    const response = await fetch(`${API_BASE_URL}/knowledge/ingest/document`, {\n      method: 'POST',\n      body: formData,\n    });\n    if (!response.ok) throw new Error(`Ingestion failed: ${response.statusText}`);\n    return response.json();\n  },\n\n  listKnowledgeBase: async () => {\n    return apiCall<{ documents: any[], jira_tickets: any[], total: number }>('/knowledge/list');\n  },\n\n  deleteDocument: async (docId: string) => {\n    return apiCall(`/knowledge/document/${encodeURIComponent(docId)}`, {\n      method: 'DELETE',\n    });\n  },\n\n  deleteJiraTicket: async (ticketId: string) => {\n    return apiCall(`/knowledge/jira-ticket/${encodeURIComponent(ticketId)}`, {\n      method: 'DELETE',\n    });\n  }\n};\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 198, "column": 0}, "map": {"version":3,"sources":["file:///Users/aryamihirs/projects/product/jira-datops-agent/frontend/components/layout/SystemStatus.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { api } from '@/lib/api/client';\nimport { MetricCard } from '@/lib/types';\n\nexport function SystemStatus() {\n    const [pendingCount, setPendingCount] = useState<number | null>(null);\n    const [isOnline, setIsOnline] = useState(true);\n\n    useEffect(() => {\n        const fetchStatus = async () => {\n            // Check API Health\n            try {\n                await api.healthCheck();\n                setIsOnline(true);\n            } catch (error) {\n                console.error('API Health check failed', error);\n                setIsOnline(false);\n            }\n\n            // Fetch Pending Count (only if online)\n            try {\n                const metrics = await api.getDashboardMetrics();\n                const pendingMetric = metrics.find(m => m.id === 'pending');\n                if (pendingMetric) {\n                    setPendingCount(Number(pendingMetric.value));\n                }\n            } catch (error) {\n                // If metrics fail but health check passed, we might still be 'online' but with DB issues?\n                // For now, let's keep it simple: any failure to get metrics doesn't necessarily mean offline\n                // unless health check also failed. But the current UI ties them. \n                // Let's rely on healthCheck for isOnline.\n                console.error('Failed to fetch metrics', error);\n            }\n        };\n\n        fetchStatus();\n        // Poll every 30 seconds\n        const interval = setInterval(fetchStatus, 30000);\n        return () => clearInterval(interval);\n    }, []);\n\n    return (\n        <div className=\"px-6 py-4 border-t border-gray-200 bg-gray-50/50 backdrop-blur-sm\">\n            <div className=\"flex items-center justify-between mb-3\">\n                <div className=\"text-xs font-semibold text-gray-500 uppercase tracking-wider\">System Status</div>\n                <div className={`h-2 w-2 rounded-full ${isOnline ? 'bg-green-500 animate-pulse' : 'bg-red-500'}`} />\n            </div>\n\n            <div className=\"space-y-3\">\n                {/* Pending Requests */}\n                <div className=\"group flex items-center justify-between p-2 rounded-md hover:bg-white hover:shadow-sm transition-all duration-200 cursor-default\">\n                    <div className=\"flex items-center space-x-2\">\n                        <div className=\"h-1.5 w-1.5 rounded-full bg-amber-400\" />\n                        <span className=\"text-xs text-gray-600 font-medium\">Pending Review</span>\n                    </div>\n                    <span className={`text-xs font-bold px-2 py-0.5 rounded-full ${pendingCount && pendingCount > 0\n                        ? 'bg-amber-100 text-amber-700'\n                        : 'bg-gray-100 text-gray-500'\n                        }`}>\n                        {pendingCount !== null ? pendingCount : '-'}\n                    </span>\n                </div>\n\n                {/* System Health */}\n                <div className=\"group flex items-center justify-between p-2 rounded-md hover:bg-white hover:shadow-sm transition-all duration-200 cursor-default\">\n                    <div className=\"flex items-center space-x-2\">\n                        <div className={`h-1.5 w-1.5 rounded-full ${isOnline ? 'bg-green-500' : 'bg-red-500'}`} />\n                        <span className=\"text-xs text-gray-600 font-medium\">Backend API</span>\n                    </div>\n                    <span className={`text-xs font-bold px-2 py-0.5 rounded-full ${isOnline\n                        ? 'bg-green-100 text-green-700'\n                        : 'bg-red-100 text-red-700'\n                        }`}>\n                        {isOnline ? 'Online' : 'Offline'}\n                    </span>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAMO,SAAS;;IACZ,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAgB;IAChE,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IAEzC,IAAA,0KAAS;kCAAC;YACN,MAAM;sDAAc;oBAChB,mBAAmB;oBACnB,IAAI;wBACA,MAAM,8HAAG,CAAC,WAAW;wBACrB,YAAY;oBAChB,EAAE,OAAO,OAAO;wBACZ,QAAQ,KAAK,CAAC,2BAA2B;wBACzC,YAAY;oBAChB;oBAEA,uCAAuC;oBACvC,IAAI;wBACA,MAAM,UAAU,MAAM,8HAAG,CAAC,mBAAmB;wBAC7C,MAAM,gBAAgB,QAAQ,IAAI;gFAAC,CAAA,IAAK,EAAE,EAAE,KAAK;;wBACjD,IAAI,eAAe;4BACf,gBAAgB,OAAO,cAAc,KAAK;wBAC9C;oBACJ,EAAE,OAAO,OAAO;wBACZ,0FAA0F;wBAC1F,6FAA6F;wBAC7F,kEAAkE;wBAClE,0CAA0C;wBAC1C,QAAQ,KAAK,CAAC,2BAA2B;oBAC7C;gBACJ;;YAEA;YACA,wBAAwB;YACxB,MAAM,WAAW,YAAY,aAAa;YAC1C;0CAAO,IAAM,cAAc;;QAC/B;iCAAG,EAAE;IAEL,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAI,WAAU;kCAA+D;;;;;;kCAC9E,6LAAC;wBAAI,WAAW,CAAC,qBAAqB,EAAE,WAAW,+BAA+B,cAAc;;;;;;;;;;;;0BAGpG,6LAAC;gBAAI,WAAU;;kCAEX,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAI,WAAU;;;;;;kDACf,6LAAC;wCAAK,WAAU;kDAAoC;;;;;;;;;;;;0CAExD,6LAAC;gCAAK,WAAW,CAAC,2CAA2C,EAAE,gBAAgB,eAAe,IACxF,gCACA,6BACA;0CACD,iBAAiB,OAAO,eAAe;;;;;;;;;;;;kCAKhD,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAI,WAAW,CAAC,yBAAyB,EAAE,WAAW,iBAAiB,cAAc;;;;;;kDACtF,6LAAC;wCAAK,WAAU;kDAAoC;;;;;;;;;;;;0CAExD,6LAAC;gCAAK,WAAW,CAAC,2CAA2C,EAAE,WACzD,gCACA,2BACA;0CACD,WAAW,WAAW;;;;;;;;;;;;;;;;;;;;;;;;AAM/C;GA3EgB;KAAA"}},
    {"offset": {"line": 388, "column": 0}, "map": {"version":3,"sources":["file:///Users/aryamihirs/projects/product/jira-datops-agent/frontend/components/layout/Sidebar.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { cn } from '@/lib/utils/helpers';\n\nconst navigation = [\n  { name: 'Dashboard', href: '/' },\n  { name: 'Requests', href: '/requests' },\n  { name: 'Connections', href: '/connections' },\n  { name: 'Knowledge Base', href: '/knowledge-base' },\n];\n\nimport { SystemStatus } from './SystemStatus';\n\nexport function Sidebar() {\n  const pathname = usePathname();\n\n  return (\n    <aside className=\"w-64 bg-white border-r border-gray-200 flex flex-col h-screen\">\n      {/* Logo/Header */}\n      <div className=\"px-6 py-5 border-b border-gray-200\">\n        <h1 className=\"text-lg font-bold text-gray-900\">DataOps Agent</h1>\n        <p className=\"text-xs text-gray-500 mt-1\">JIRA Automation Platform</p>\n      </div>\n\n      {/* Navigation */}\n      <nav className=\"flex-1 px-3 py-4\">\n        <div className=\"space-y-1\">\n          {navigation.map((item) => {\n            const isActive = pathname === item.href;\n            return (\n              <Link\n                key={item.name}\n                href={item.href}\n                className={cn(\n                  'block px-3 py-2.5 rounded-lg text-sm font-medium transition-all',\n                  isActive\n                    ? 'bg-blue-50 text-blue-700 border-l-4 border-blue-700 pl-[8px]'\n                    : 'text-gray-700 hover:bg-gray-50 border-l-4 border-transparent pl-[8px]'\n                )}\n              >\n                {item.name}\n              </Link>\n            );\n          })}\n        </div>\n      </nav>\n\n      {/* Quick Stats */}\n      <SystemStatus />\n    </aside>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AASA;;;AAbA;;;;AAMA,MAAM,aAAa;IACjB;QAAE,MAAM;QAAa,MAAM;IAAI;IAC/B;QAAE,MAAM;QAAY,MAAM;IAAY;IACtC;QAAE,MAAM;QAAe,MAAM;IAAe;IAC5C;QAAE,MAAM;QAAkB,MAAM;IAAkB;CACnD;;AAIM,SAAS;;IACd,MAAM,WAAW,IAAA,oJAAW;IAE5B,qBACE,6LAAC;QAAM,WAAU;;0BAEf,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAkC;;;;;;kCAChD,6LAAC;wBAAE,WAAU;kCAA6B;;;;;;;;;;;;0BAI5C,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;8BACZ,WAAW,GAAG,CAAC,CAAC;wBACf,MAAM,WAAW,aAAa,KAAK,IAAI;wBACvC,qBACE,6LAAC,0KAAI;4BAEH,MAAM,KAAK,IAAI;4BACf,WAAW,IAAA,gIAAE,EACX,mEACA,WACI,iEACA;sCAGL,KAAK,IAAI;2BATL,KAAK,IAAI;;;;;oBAYpB;;;;;;;;;;;0BAKJ,6LAAC,wJAAY;;;;;;;;;;;AAGnB;GAtCgB;;QACG,oJAAW;;;KADd"}},
    {"offset": {"line": 506, "column": 0}, "map": {"version":3,"sources":["file:///Users/aryamihirs/projects/product/jira-datops-agent/frontend/components/ui/Button.tsx"],"sourcesContent":["import { ButtonHTMLAttributes } from 'react';\nimport { cn } from '@/lib/utils/helpers';\n\ninterface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: 'primary' | 'secondary' | 'ghost';\n  size?: 'sm' | 'md' | 'lg';\n}\n\nexport function Button({\n  children,\n  variant = 'primary',\n  size = 'md',\n  className,\n  ...props\n}: ButtonProps) {\n  const baseStyles = 'rounded-md font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed';\n\n  const variants = {\n    primary: 'bg-blue-600 text-white hover:bg-blue-700 active:bg-blue-800',\n    secondary: 'border border-blue-600 text-blue-600 hover:bg-blue-50',\n    ghost: 'text-gray-700 hover:bg-gray-100'\n  };\n\n  const sizes = {\n    sm: 'h-8 px-3 text-sm',\n    md: 'h-9 px-4 text-sm',\n    lg: 'h-10 px-6 text-base'\n  };\n\n  return (\n    <button\n      className={cn(baseStyles, variants[variant], sizes[size], className)}\n      {...props}\n    >\n      {children}\n    </button>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;;;AAOO,SAAS,OAAO,EACrB,QAAQ,EACR,UAAU,SAAS,EACnB,OAAO,IAAI,EACX,SAAS,EACT,GAAG,OACS;IACZ,MAAM,aAAa;IAEnB,MAAM,WAAW;QACf,SAAS;QACT,WAAW;QACX,OAAO;IACT;IAEA,MAAM,QAAQ;QACZ,IAAI;QACJ,IAAI;QACJ,IAAI;IACN;IAEA,qBACE,6LAAC;QACC,WAAW,IAAA,gIAAE,EAAC,YAAY,QAAQ,CAAC,QAAQ,EAAE,KAAK,CAAC,KAAK,EAAE;QACzD,GAAG,KAAK;kBAER;;;;;;AAGP;KA7BgB"}},
    {"offset": {"line": 546, "column": 0}, "map": {"version":3,"sources":["file:///Users/aryamihirs/projects/product/jira-datops-agent/frontend/components/layout/Assistant.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { Button } from '@/components/ui/Button';\nimport { cn } from '@/lib/utils/helpers';\n\ninterface Message {\n  role: 'user' | 'assistant';\n  content: string;\n  timestamp: Date;\n}\n\nexport function Assistant() {\n  const [isOpen, setIsOpen] = useState(false);\n  const [messages, setMessages] = useState<Message[]>([\n    {\n      role: 'assistant',\n      content: 'Hello! I can help you with bulk operations, status checks, and pattern suggestions. Try \"approve all above 90%\" or \"what\\'s pending?\"',\n      timestamp: new Date()\n    }\n  ]);\n  const [input, setInput] = useState('');\n\n  const handleSend = () => {\n    if (!input.trim()) return;\n\n    // Add user message\n    const newMessages: Message[] = [\n      ...messages,\n      { role: 'user', content: input, timestamp: new Date() }\n    ];\n\n    // Simulate assistant response\n    setTimeout(() => {\n      setMessages([\n        ...newMessages,\n        {\n          role: 'assistant',\n          content: 'This is a placeholder response. Connect to your AI backend to enable real conversations.',\n          timestamp: new Date()\n        }\n      ]);\n    }, 500);\n\n    setMessages(newMessages);\n    setInput('');\n  };\n\n  return (\n    <>\n      {/* Toggle Button */}\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"fixed right-4 bottom-4 w-12 h-12 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 z-50\"\n      >\n        {isOpen ? 'âœ•' : 'ðŸ’¬'}\n      </button>\n\n      {/* Assistant Panel */}\n      <div\n        className={cn(\n          'fixed right-0 top-0 h-screen w-80 bg-white border-l border-gray-200 shadow-xl transition-transform z-40',\n          isOpen ? 'translate-x-0' : 'translate-x-full'\n        )}\n      >\n        {/* Header */}\n        <div className=\"p-4 border-b border-gray-200\">\n          <h2 className=\"font-semibold text-gray-900\">AI Assistant</h2>\n          <p className=\"text-xs text-gray-500 mt-1\">Ask me anything</p>\n        </div>\n\n        {/* Messages */}\n        <div className=\"flex-1 overflow-y-auto p-4 space-y-3 h-[calc(100vh-160px)]\">\n          {messages.map((msg, idx) => (\n            <div\n              key={idx}\n              className={cn(\n                'p-3 rounded-lg text-sm',\n                msg.role === 'user'\n                  ? 'bg-blue-600 text-white ml-8'\n                  : 'bg-gray-100 text-gray-900 mr-8'\n              )}\n            >\n              {msg.content}\n            </div>\n          ))}\n        </div>\n\n        {/* Input */}\n        <div className=\"p-4 border-t border-gray-200\">\n          <div className=\"flex gap-2\">\n            <input\n              type=\"text\"\n              value={input}\n              onChange={(e) => setInput(e.target.value)}\n              onKeyPress={(e) => e.key === 'Enter' && handleSend()}\n              placeholder=\"Type a message...\"\n              className=\"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            />\n            <Button onClick={handleSend} size=\"sm\">\n              Send\n            </Button>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAYO,SAAS;;IACd,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAY;QAClD;YACE,MAAM;YACN,SAAS;YACT,WAAW,IAAI;QACjB;KACD;IACD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IAEnC,MAAM,aAAa;QACjB,IAAI,CAAC,MAAM,IAAI,IAAI;QAEnB,mBAAmB;QACnB,MAAM,cAAyB;eAC1B;YACH;gBAAE,MAAM;gBAAQ,SAAS;gBAAO,WAAW,IAAI;YAAO;SACvD;QAED,8BAA8B;QAC9B,WAAW;YACT,YAAY;mBACP;gBACH;oBACE,MAAM;oBACN,SAAS;oBACT,WAAW,IAAI;gBACjB;aACD;QACH,GAAG;QAEH,YAAY;QACZ,SAAS;IACX;IAEA,qBACE;;0BAEE,6LAAC;gBACC,SAAS,IAAM,UAAU,CAAC;gBAC1B,WAAU;0BAET,SAAS,MAAM;;;;;;0BAIlB,6LAAC;gBACC,WAAW,IAAA,gIAAE,EACX,2GACA,SAAS,kBAAkB;;kCAI7B,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAA8B;;;;;;0CAC5C,6LAAC;gCAAE,WAAU;0CAA6B;;;;;;;;;;;;kCAI5C,6LAAC;wBAAI,WAAU;kCACZ,SAAS,GAAG,CAAC,CAAC,KAAK,oBAClB,6LAAC;gCAEC,WAAW,IAAA,gIAAE,EACX,0BACA,IAAI,IAAI,KAAK,SACT,gCACA;0CAGL,IAAI,OAAO;+BARP;;;;;;;;;;kCAcX,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCACC,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oCACxC,YAAY,CAAC,IAAM,EAAE,GAAG,KAAK,WAAW;oCACxC,aAAY;oCACZ,WAAU;;;;;;8CAEZ,6LAAC,wIAAM;oCAAC,SAAS;oCAAY,MAAK;8CAAK;;;;;;;;;;;;;;;;;;;;;;;;;AAQnD;GA/FgB;KAAA"}},
    {"offset": {"line": 707, "column": 0}, "map": {"version":3,"sources":["file:///Users/aryamihirs/projects/product/jira-datops-agent/frontend/components/layout/MainLayout.tsx"],"sourcesContent":["import { ReactNode } from 'react';\nimport { Sidebar } from './Sidebar';\nimport { Assistant } from './Assistant';\n\ninterface MainLayoutProps {\n  children: ReactNode;\n}\n\nexport function MainLayout({ children }: MainLayoutProps) {\n  return (\n    <div className=\"flex min-h-screen bg-gray-50\">\n      <Sidebar />\n      <main className=\"flex-1 overflow-auto\">\n        {children}\n      </main>\n      <Assistant />\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;;;;AAMO,SAAS,WAAW,EAAE,QAAQ,EAAmB;IACtD,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,8IAAO;;;;;0BACR,6LAAC;gBAAK,WAAU;0BACb;;;;;;0BAEH,6LAAC,kJAAS;;;;;;;;;;;AAGhB;KAVgB"}},
    {"offset": {"line": 756, "column": 0}, "map": {"version":3,"sources":["file:///Users/aryamihirs/projects/product/jira-datops-agent/frontend/components/requests/RequestModal.tsx"],"sourcesContent":["import { Fragment, useState, useEffect } from 'react';\nimport { Dialog, Transition } from '@headlessui/react';\nimport { XMarkIcon } from '@heroicons/react/24/outline';\nimport { Request, Connection } from '@/lib/types';\nimport { api } from '@/lib/api/client';\n\ninterface RequestModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    request: Request | null;\n    onUpdate: () => void;\n}\n\nexport function RequestModal({ isOpen, onClose, request, onUpdate }: RequestModalProps) {\n    const [formData, setFormData] = useState<Partial<Request>>({});\n    const [isCreating, setIsCreating] = useState(false);\n    const [connections, setConnections] = useState<Connection[]>([]);\n    const [activeConnection, setActiveConnection] = useState<Connection | null>(null);\n    const [selectedIssueType, setSelectedIssueType] = useState<string>('');\n    const [dynamicFields, setDynamicFields] = useState<Record<string, any>>({});\n    const [isAnalyzing, setIsAnalyzing] = useState(false);\n    const [showJiraDetails, setShowJiraDetails] = useState(false);\n\n    useEffect(() => {\n        const loadConnections = async () => {\n            try {\n                const data = await api.getConnections();\n                setConnections(data);\n                // Find active JIRA connection\n                const jiraConn = data.find(c => c.type === 'jira' && c.status === 'active');\n                if (jiraConn) {\n                    setActiveConnection(jiraConn);\n                    if (jiraConn.field_config) {\n                        const issueTypes = Object.keys(jiraConn.field_config);\n                        if (issueTypes.length > 0) {\n                            setSelectedIssueType(issueTypes[0]);\n                        }\n                    }\n                }\n            } catch (error) {\n                console.error('Failed to load connections', error);\n            }\n        };\n        loadConnections();\n    }, [isOpen]);\n\n    useEffect(() => {\n        if (request) {\n            setFormData(request);\n            setIsCreating(false);\n            setShowJiraDetails(true); // Always show details for existing requests\n            // If editing, try to populate dynamic fields from source_content if available\n            if (request.source_content && request.source_content.jira_fields) {\n                setDynamicFields(request.source_content.jira_fields);\n                if (request.source_content.issue_type) {\n                    setSelectedIssueType(request.source_content.issue_type);\n                }\n            }\n        } else {\n            setFormData({\n                source_tag: 'manual',\n                status: 'Under Review'\n            });\n            setIsCreating(true);\n            setShowJiraDetails(false); // Hide initially for new requests\n            setDynamicFields({});\n        }\n    }, [request, isOpen]);\n\n    // Helper to construct schema for AI\n    const getJiraSchema = (issueType: string) => {\n        if (!activeConnection?.field_config || !issueType) return null;\n\n        const config = activeConnection.field_config[issueType];\n        if (!config || !config.fields) return null;\n\n        const schema: Record<string, string> = {};\n\n        Object.entries(config.fields).forEach(([key, field]: [string, any]) => {\n            if (field.included) {\n                // Create a description for the AI based on field type and name\n                let description = field.name;\n                if (field.required) description += \" (Required)\";\n                if (field.type === 'array') description += \" (List of values)\";\n\n                schema[key] = description;\n            }\n        });\n\n        return schema;\n    };\n\n    const handleAnalyze = async () => {\n        if (!formData.description) return;\n\n        setIsAnalyzing(true);\n        try {\n            // Determine issue type (default to first available if not set)\n            let currentIssueType = selectedIssueType;\n            if (!currentIssueType && activeConnection?.field_config) {\n                const types = Object.keys(activeConnection.field_config);\n                if (types.length > 0) {\n                    currentIssueType = types[0];\n                    setSelectedIssueType(currentIssueType);\n                }\n            }\n\n            // Get current JIRA schema to guide the AI\n            const jiraSchema = getJiraSchema(currentIssueType);\n            console.log('Sending JIRA Schema to AI:', jiraSchema);\n\n            // Call analyze endpoint with schema\n            const result = await api.analyzeRequest(formData.description, undefined, jiraSchema || undefined);\n\n            console.log('AI Analysis Result:', result);\n\n            // Map fields directly since AI now uses our schema keys\n            setDynamicFields(prev => ({ ...prev, ...result }));\n\n            // Update main form data\n            setFormData(prev => ({\n                ...prev,\n                summary: result.summary || prev.summary,\n            }));\n\n            // Switch to details tab\n            setShowJiraDetails(true);\n        } catch (error) {\n            console.error('Failed to analyze request', error);\n            alert('Failed to analyze request. Please try again.');\n        } finally {\n            setIsAnalyzing(false);\n        }\n    };\n\n    const handleSave = async () => {\n        try {\n            console.log('Saving request...', formData);\n            const dataToSave = {\n                source_tag: 'manual', // Ensure default matches backend expectation\n                ...formData,\n                source_content: {\n                    ...formData.source_content,\n                    issue_type: selectedIssueType,\n                    jira_fields: dynamicFields\n                }\n            };\n\n            if (isCreating) {\n                console.log('Creating request with data:', dataToSave);\n                await api.createRequest(dataToSave);\n            } else if (request) {\n                console.log('Updating request with data:', dataToSave);\n                await api.updateRequest(request.id, dataToSave);\n            }\n            onUpdate();\n            onClose();\n        } catch (error) {\n            console.error('Failed to save request', error);\n            alert(`Failed to save request: ${error instanceof Error ? error.message : String(error)}`);\n        }\n    };\n\n    const handleApprove = async () => {\n        if (!request) return;\n        try {\n            await api.approveRequest(request.id);\n            onUpdate();\n            onClose();\n        } catch (error) {\n            console.error('Failed to approve request', error);\n        }\n    };\n\n    const handleReject = async () => {\n        if (!request) return;\n        try {\n            await api.rejectRequest(request.id);\n            onUpdate();\n            onClose();\n        } catch (error) {\n            console.error('Failed to reject request', error);\n        }\n    };\n\n    const renderDynamicField = (fieldKey: string, field: any) => {\n        // Skip if not included\n        if (field.included === false) return null;\n\n        const isRequired = field.required || field.custom_required;\n        const label = field.name;\n\n        // Handle different field types\n        // This is a basic implementation - can be expanded for specific JIRA types\n        return (\n            <div key={fieldKey} className=\"sm:col-span-6\">\n                <label className=\"block text-sm font-medium leading-6 text-gray-900\">\n                    {label} {isRequired && <span className=\"text-red-500\">*</span>}\n                </label>\n                <div className=\"mt-2\">\n                    <input\n                        type=\"text\"\n                        required={isRequired}\n                        className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n                        value={dynamicFields[fieldKey] || ''}\n                        onChange={(e) => setDynamicFields({ ...dynamicFields, [fieldKey]: e.target.value })}\n                    />\n                </div>\n            </div>\n        );\n    };\n\n    return (\n        <Transition.Root show={isOpen} as={Fragment}>\n            <Dialog as=\"div\" className=\"relative z-50\" onClose={onClose}>\n                <Transition.Child\n                    as={Fragment}\n                    enter=\"ease-out duration-300\"\n                    enterFrom=\"opacity-0\"\n                    enterTo=\"opacity-100\"\n                    leave=\"ease-in duration-200\"\n                    leaveFrom=\"opacity-100\"\n                    leaveTo=\"opacity-0\"\n                >\n                    <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\" />\n                </Transition.Child>\n\n                <div className=\"fixed inset-0 z-10 overflow-y-auto\">\n                    <div className=\"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0\">\n                        <Transition.Child\n                            as={Fragment}\n                            enter=\"ease-out duration-300\"\n                            enterFrom=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n                            enterTo=\"opacity-100 translate-y-0 sm:scale-100\"\n                            leave=\"ease-in duration-200\"\n                            leaveFrom=\"opacity-100 translate-y-0 sm:scale-100\"\n                            leaveTo=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n                        >\n                            <Dialog.Panel className=\"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-4xl sm:p-6\">\n                                <div className=\"absolute right-0 top-0 hidden pr-4 pt-4 sm:block\">\n                                    <button\n                                        type=\"button\"\n                                        className=\"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\"\n                                        onClick={onClose}\n                                    >\n                                        <span className=\"sr-only\">Close</span>\n                                        <XMarkIcon className=\"h-6 w-6\" aria-hidden=\"true\" />\n                                    </button>\n                                </div>\n\n                                <div className=\"sm:flex sm:items-start w-full\">\n                                    <div className=\"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left w-full\">\n                                        <Dialog.Title as=\"h3\" className=\"text-base font-semibold leading-6 text-gray-900\">\n                                            {isCreating ? 'New Request' : `Request Details: ${request?.summary}`}\n                                        </Dialog.Title>\n\n                                        {/* Tabs for Navigation */}\n                                        <div className=\"mt-4 border-b border-gray-200\">\n                                            <nav className=\"-mb-px flex space-x-8\" aria-label=\"Tabs\">\n                                                <button\n                                                    onClick={() => setShowJiraDetails(false)}\n                                                    className={`${!showJiraDetails\n                                                        ? 'border-indigo-500 text-indigo-600'\n                                                        : 'border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700'\n                                                        } whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium`}\n                                                >\n                                                    Context & Assets\n                                                </button>\n                                                <button\n                                                    onClick={() => setShowJiraDetails(true)}\n                                                    disabled={!activeConnection}\n                                                    className={`${showJiraDetails\n                                                        ? 'border-indigo-500 text-indigo-600'\n                                                        : 'border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700'\n                                                        } whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed`}\n                                                >\n                                                    JIRA Details\n                                                </button>\n                                            </nav>\n                                        </div>\n\n                                        <div className=\"mt-6\">\n                                            {/* Context & Assets Tab */}\n                                            {!showJiraDetails && (\n                                                <div className=\"space-y-6 animate-in fade-in slide-in-from-left-4 duration-300\">\n                                                    <div>\n                                                        <label className=\"block text-sm font-medium leading-6 text-gray-900\">\n                                                            Request Context\n                                                        </label>\n                                                        <p className=\"mt-1 text-sm text-gray-500\">\n                                                            Describe the task or request in detail. The AI agent will extract the necessary information.\n                                                        </p>\n                                                        <div className=\"mt-2\">\n                                                            <textarea\n                                                                rows={6}\n                                                                className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n                                                                placeholder=\"e.g. Please create a JIRA ticket for fixing the login bug reported by Sarah. See attached screenshot...\"\n                                                                value={formData.description || ''}\n                                                                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                                                            />\n                                                        </div>\n                                                    </div>\n\n                                                    <div>\n                                                        <label className=\"block text-sm font-medium leading-6 text-gray-900\">\n                                                            Assets\n                                                        </label>\n                                                        <div className=\"mt-2 flex justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10\">\n                                                            <div className=\"text-center\">\n                                                                <div className=\"mt-4 flex text-sm leading-6 text-gray-600\">\n                                                                    <label\n                                                                        htmlFor=\"file-upload\"\n                                                                        className=\"relative cursor-pointer rounded-md bg-white font-semibold text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-600 focus-within:ring-offset-2 hover:text-indigo-500\"\n                                                                    >\n                                                                        <span>Upload files</span>\n                                                                        <input id=\"file-upload\" name=\"file-upload\" type=\"file\" className=\"sr-only\" multiple />\n                                                                    </label>\n                                                                    <p className=\"pl-1\">or drag and drop</p>\n                                                                </div>\n                                                                <p className=\"text-xs leading-5 text-gray-600\">Emails, Screenshots, Documents</p>\n                                                            </div>\n                                                        </div>\n                                                    </div>\n\n                                                    <div className=\"flex justify-end pt-4 border-t border-gray-100\">\n                                                        <button\n                                                            type=\"button\"\n                                                            disabled={isAnalyzing || !formData.description}\n                                                            className=\"inline-flex items-center gap-x-2 rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed\"\n                                                            onClick={handleAnalyze}\n                                                        >\n                                                            {isAnalyzing ? (\n                                                                <>\n                                                                    <div className=\"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent\" />\n                                                                    Analyzing...\n                                                                </>\n                                                            ) : (\n                                                                <>\n                                                                    Analyze & Generate Fields\n                                                                </>\n                                                            )}\n                                                        </button>\n                                                    </div>\n                                                </div>\n                                            )}\n\n                                            {/* JIRA Details Tab */}\n                                            {showJiraDetails && (\n                                                <div className=\"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300\">\n                                                    {activeConnection ? (\n                                                        <>\n                                                            <div className=\"grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6\">\n\n                                                                {/* Issue Type Selector */}\n                                                                <div className=\"sm:col-span-6\">\n                                                                    <label className=\"block text-sm font-medium leading-6 text-gray-900\">\n                                                                        Issue Type <span className=\"text-red-500\">*</span>\n                                                                    </label>\n                                                                    <div className=\"mt-2\">\n                                                                        <select\n                                                                            value={selectedIssueType}\n                                                                            onChange={(e) => setSelectedIssueType(e.target.value)}\n                                                                            className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n                                                                        >\n                                                                            {activeConnection.field_config && Object.keys(activeConnection.field_config).map((type) => (\n                                                                                <option key={type} value={type}>{type}</option>\n                                                                            ))}\n                                                                        </select>\n                                                                    </div>\n                                                                </div>\n\n                                                                {/* Dynamic Fields Grid */}\n                                                                {selectedIssueType && activeConnection.field_config && activeConnection.field_config[selectedIssueType] ? (\n                                                                    Object.entries(activeConnection.field_config[selectedIssueType].fields)\n                                                                        .sort(([, a]: [string, any], [, b]: [string, any]) => {\n                                                                            if (a.required !== b.required) return a.required ? -1 : 1;\n                                                                            return a.name.localeCompare(b.name);\n                                                                        })\n                                                                        .map(([fieldKey, field]: [string, any]) => renderDynamicField(fieldKey, field))\n                                                                ) : (\n                                                                    <div className=\"sm:col-span-6 text-center text-gray-500 py-4\">\n                                                                        No fields configured for this issue type.\n                                                                    </div>\n                                                                )}\n                                                            </div>\n                                                        </>\n                                                    ) : (\n                                                        <div className=\"text-center py-10 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300\">\n                                                            <p className=\"text-gray-500\">No active JIRA connection found.</p>\n                                                            <p className=\"text-sm text-gray-400 mt-1\">Please configure a connection in settings.</p>\n                                                        </div>\n                                                    )}\n\n                                                    {/* Source Content (Read Only) - Only show if present */}\n                                                    {request?.source_content && (\n                                                        <div className=\"sm:col-span-6\">\n                                                            <label className=\"block text-sm font-medium leading-6 text-gray-900\">Source Content</label>\n                                                            <div className=\"mt-2 p-3 bg-gray-50 rounded-md text-sm text-gray-700 max-h-40 overflow-y-auto\">\n                                                                <pre className=\"whitespace-pre-wrap font-sans\">\n                                                                    {JSON.stringify(request.source_content, null, 2)}\n                                                                </pre>\n                                                            </div>\n                                                        </div>\n                                                    )}\n                                                </div>\n                                            )}\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div className=\"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse\">\n                                    {!isCreating && (\n                                        <>\n                                            <button\n                                                type=\"button\"\n                                                className=\"inline-flex w-full justify-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500 sm:ml-3 sm:w-auto\"\n                                                onClick={handleApprove}\n                                            >\n                                                Approve\n                                            </button>\n                                            <button\n                                                type=\"button\"\n                                                className=\"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto\"\n                                                onClick={handleReject}\n                                            >\n                                                Reject\n                                            </button>\n                                        </>\n                                    )}\n                                    {/* Only show Save/Create if JIRA details are visible (meaning analysis is done or skipped) */}\n                                    {showJiraDetails && (\n                                        <button\n                                            type=\"button\"\n                                            className=\"inline-flex w-full justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 sm:ml-3 sm:w-auto\"\n                                            onClick={handleSave}\n                                        >\n                                            {isCreating ? 'Create Request' : 'Save Changes'}\n                                        </button>\n                                    )}\n                                    <button\n                                        type=\"button\"\n                                        className=\"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto\"\n                                        onClick={onClose}\n                                    >\n                                        Cancel\n                                    </button>\n                                </div>\n                            </Dialog.Panel>\n                        </Transition.Child>\n                    </div>\n                </div>\n            </Dialog>\n        </Transition.Root>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1549, "column": 0}, "map": {"version":3,"sources":["file:///Users/aryamihirs/projects/product/jira-datops-agent/frontend/app/requests/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { MainLayout } from '@/components/layout/MainLayout';\nimport { RequestModal } from '@/components/requests/RequestModal';\nimport { api } from '@/lib/api/client';\nimport { Request } from '@/lib/types';\nimport { PlusIcon, FunnelIcon, LockClosedIcon, LockOpenIcon } from '@heroicons/react/24/outline';\n\nexport default function RequestsPage() {\n  const [requests, setRequests] = useState<Request[]>([]);\n  const [selectedRequest, setSelectedRequest] = useState<Request | null>(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [filterStatus, setFilterStatus] = useState<string>('');\n  const [isLoading, setIsLoading] = useState(true);\n  const [selectedIds, setSelectedIds] = useState<number[]>([]);\n  const [isReleasing, setIsReleasing] = useState(false);\n\n  // Computed state for release button eligibility\n  const selectedRequests = requests.filter(r => selectedIds.includes(r.id));\n  const canRelease = selectedRequests.length > 0 && selectedRequests.every(r => r.status === 'Approved' && !r.jira_issue_key);\n\n  const fetchRequests = async () => {\n    try {\n      setIsLoading(true);\n      const data = await api.getRequests(filterStatus ? { status: filterStatus } : undefined);\n      setRequests(data);\n    } catch (error) {\n      console.error('Failed to fetch requests', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchRequests();\n    setSelectedIds([]); // Reset selection on filter change\n  }, [filterStatus]);\n\n  const handleRowClick = (request: Request) => {\n    setSelectedRequest(request);\n    setIsModalOpen(true);\n  };\n\n  const toggleSelection = (e: React.MouseEvent, id: number) => {\n    e.stopPropagation();\n    setSelectedIds(prev =>\n      prev.includes(id) ? prev.filter(item => item !== id) : [...prev, id]\n    );\n  };\n\n  const handleSelectAll = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.checked) {\n      setSelectedIds(requests.map(r => r.id));\n    } else {\n      setSelectedIds([]);\n    }\n  };\n\n  const handleRelease = async () => {\n    if (!canRelease) return;\n\n    if (!confirm(`Are you sure you want to release ${selectedIds.length} request(s) to JIRA?`)) return;\n\n    setIsReleasing(true);\n    try {\n      const result = await api.releaseRequests(selectedIds);\n      alert(`Release Complete!\\nSuccess: ${result.success}\\nFailed: ${result.failed}\\nSkipped: ${result.skipped}`);\n      fetchRequests();\n      setSelectedIds([]);\n    } catch (error) {\n      console.error('Release failed', error);\n      alert('Failed to release requests to JIRA.');\n    } finally {\n      setIsReleasing(false);\n    }\n  };\n\n  const handleExportCSV = async () => {\n    try {\n      await api.exportRequestsCSV();\n    } catch (error) {\n      console.error('Failed to export CSV', error);\n    }\n  };\n\n  return (\n    <MainLayout>\n      <div className=\"p-8\">\n        <div className=\"sm:flex sm:items-center\">\n          <div className=\"sm:flex-auto\">\n            <h1 className=\"text-2xl font-bold text-gray-900\">Requests</h1>\n            <p className=\"mt-2 text-sm text-gray-700\">\n              Manage and review incoming JIRA requests from various channels.\n            </p>\n          </div>\n          <div className=\"mt-4 sm:ml-16 sm:mt-0 sm:flex-none flex space-x-3\">\n            <button\n              type=\"button\"\n              onClick={handleRelease}\n              disabled={!canRelease || isReleasing}\n              className={`inline-flex items-center gap-x-1.5 rounded-md px-3 py-2 text-sm font-semibold shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 ${canRelease\n                ? 'bg-green-600 text-white hover:bg-green-500'\n                : 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                }`}\n            >\n              {canRelease ? (\n                <LockOpenIcon className=\"-ml-0.5 h-5 w-5\" aria-hidden=\"true\" />\n              ) : (\n                <LockClosedIcon className=\"-ml-0.5 h-5 w-5\" aria-hidden=\"true\" />\n              )}\n              {isReleasing ? 'Releasing...' : 'Release to JIRA'}\n            </button>\n\n            <button\n              type=\"button\"\n              onClick={handleExportCSV}\n              className=\"block rounded-md bg-white px-3 py-2 text-center text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50\"\n            >\n              Export CSV\n            </button>\n            <button\n              type=\"button\"\n              id=\"new-request-btn\"\n              onClick={() => {\n                setSelectedRequest(null);\n                setIsModalOpen(true);\n              }}\n              className=\"block rounded-md bg-indigo-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\"\n            >\n              <PlusIcon className=\"h-5 w-5 inline-block mr-1\" />\n              New Request\n            </button>\n          </div>\n        </div>\n\n        {/* Filters */}\n        <div className=\"mt-4 flex items-center space-x-4\">\n          <div className=\"flex items-center\">\n            <FunnelIcon className=\"h-5 w-5 text-gray-400 mr-2\" />\n            <select\n              value={filterStatus}\n              onChange={(e) => setFilterStatus(e.target.value)}\n              className=\"block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n            >\n              <option value=\"\">All Statuses</option>\n              <option value=\"Under Review\">Under Review</option>\n              <option value=\"Approved\">Approved</option>\n              <option value=\"Rejected\">Rejected</option>\n              <option value=\"Released\">Released</option>\n            </select>\n          </div>\n        </div>\n\n        {/* Table */}\n        <div className=\"mt-8 flow-root\">\n          <div className=\"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8\">\n            <div className=\"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8\">\n              <div className=\"overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg\">\n                <table className=\"min-w-full divide-y divide-gray-300\">\n                  <thead className=\"bg-gray-50\">\n                    <tr>\n                      <th scope=\"col\" className=\"relative px-7 sm:w-12 sm:px-6\">\n                        <input\n                          type=\"checkbox\"\n                          className=\"absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600\"\n                          checked={requests.length > 0 && selectedIds.length === requests.length}\n                          onChange={handleSelectAll}\n                        />\n                      </th>\n                      <th scope=\"col\" className=\"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6\">\n                        Summary\n                      </th>\n                      <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">\n                        Status\n                      </th>\n                      <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">\n                        Source\n                      </th>\n                      <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">\n                        Requestor\n                      </th>\n                      <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">\n                        Created At\n                      </th>\n                      <th scope=\"col\" className=\"relative py-3.5 pl-3 pr-4 sm:pr-6\">\n                        <span className=\"sr-only\">Edit</span>\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"divide-y divide-gray-200 bg-white\">\n                    {isLoading ? (\n                      <tr>\n                        <td colSpan={7} className=\"text-center py-4\">Loading...</td>\n                      </tr>\n                    ) : requests.length === 0 ? (\n                      <tr>\n                        <td colSpan={7} className=\"text-center py-4 text-gray-500\">No requests found</td>\n                      </tr>\n                    ) : (\n                      requests.map((request) => {\n                        const isReleased = !!request.jira_issue_key;\n                        const rowClass = isReleased\n                          ? 'bg-gray-100 text-gray-500 hover:bg-gray-100'\n                          : 'hover:bg-gray-50 cursor-pointer';\n\n                        return (\n                          <tr\n                            key={request.id}\n                            className={rowClass}\n                            onClick={() => !isReleased && handleRowClick(request)}\n                          >\n                            <td className=\"relative px-7 sm:w-12 sm:px-6\">\n                              <input\n                                type=\"checkbox\"\n                                className=\"absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600\"\n                                checked={selectedIds.includes(request.id)}\n                                onClick={(e) => toggleSelection(e, request.id)}\n                                disabled={isReleased}\n                              />\n                            </td>\n                            <td className=\"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium sm:pl-6\">\n                              {request.summary}\n                              {isReleased && <span className=\"ml-2 text-xs text-gray-400\">({request.jira_issue_key})</span>}\n                            </td>\n                            <td className=\"whitespace-nowrap px-3 py-4 text-sm\">\n                              <span className={`inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset ${request.status === 'Approved' ? 'bg-green-50 text-green-700 ring-green-600/20' :\n                                request.status === 'Rejected' ? 'bg-red-50 text-red-700 ring-red-600/20' :\n                                  request.status === 'Released' ? 'bg-gray-100 text-gray-600 ring-gray-400/20' :\n                                    'bg-yellow-50 text-yellow-700 ring-yellow-600/20'\n                                }`}>\n                                {request.status}\n                              </span>\n                            </td>\n                            <td className=\"whitespace-nowrap px-3 py-4 text-sm\">{request.source_tag}</td>\n                            <td className=\"whitespace-nowrap px-3 py-4 text-sm\">{request.requestor || '-'}</td>\n                            <td className=\"whitespace-nowrap px-3 py-4 text-sm\">\n                              {new Date(request.created_at).toLocaleDateString()}\n                            </td>\n                            <td className=\"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6\">\n                              {!isReleased ? (\n                                <button className=\"text-indigo-600 hover:text-indigo-900\" onClick={(e) => { e.stopPropagation(); handleRowClick(request); }}>\n                                  View<span className=\"sr-only\">, {request.summary}</span>\n                                </button>\n                              ) : (\n                                <span className=\"text-gray-400\">View</span>\n                              )}\n                            </td>\n                          </tr>\n                        );\n                      })\n                    )}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <RequestModal\n          isOpen={isModalOpen}\n          onClose={() => setIsModalOpen(false)}\n          request={selectedRequest}\n          onUpdate={fetchRequests}\n        />\n      </div>\n    </MainLayout>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}
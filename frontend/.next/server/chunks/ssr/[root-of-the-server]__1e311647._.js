module.exports=[72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},78128,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(61162),e=a.i(25707);let f=c.forwardRef(function({title:a,titleId:b,...d},e){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},d),a?c.createElement("title",{id:b},a):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))});var g=a.i(6878),h=a.i(34079),i=a.i(95332);function j(){let[a,j]=(0,c.useState)([]),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)({open:!1,item:null}),u=async()=>{try{n(!0);let a=await fetch(`${process.env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api"}/knowledge/list`),b=await a.json(),c=b.items.filter(a=>"document"===a.file_type),d=b.items.filter(a=>"jira_ticket"===a.file_type);j(c),l(d)}catch(a){console.error("Failed to load knowledge base",a)}finally{n(!1)}};(0,c.useEffect)(()=>{u()},[]);let v=async(a,b)=>{if(confirm(`Are you sure you want to delete ${b}?`))try{if(!(await fetch(`${process.env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api"}/knowledge/item/${a}/${encodeURIComponent(b)}`,{method:"DELETE"})).ok)throw Error("Delete failed");p(`Successfully deleted ${b}`),u()}catch(a){p(`Failed to delete ${b}`),console.error(a)}},w=async(a,b)=>{try{let c=await fetch(`${process.env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api"}/knowledge/item/${a}/${encodeURIComponent(b)}/content`);if(!c.ok)throw Error("Failed to load content");let d=await c.json();t({open:!0,item:d})}catch(a){console.error("Failed to load content",a),alert("Failed to load file content")}},x=async a=>{try{r(!0),p("Uploading...");let b=new FormData;b.append("file",a);let c=await fetch(`${process.env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api"}/knowledge/upload`,{method:"POST",body:b});if(!c.ok)throw Error("Upload failed");let d=await c.json();p(d.message),u()}catch(b){p(`Failed to upload ${a.name}`),console.error(b)}finally{r(!1)}},y=(a,c)=>m?(0,b.jsx)("div",{className:"text-center py-12 bg-white",children:(0,b.jsx)("p",{className:"text-gray-500",children:"Loading..."})}):0===a.length?(0,b.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:[(0,b.jsx)(f,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,b.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["No ","document"===c?"documents":"JIRA tickets"," uploaded yet."]})]}):(0,b.jsx)("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6",children:"document"===c?"File Name":"Ticket ID"}),"jira_ticket"===c&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Type"}),(0,b.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Status"})]}),(0,b.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Preview"}),(0,b.jsx)("th",{scope:"col",className:"relative py-3.5 pl-3 pr-4 sm:pr-6",children:(0,b.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white",children:a.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-6",children:"document"===c&&a.has_file?(0,b.jsx)("a",{href:`${process.env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api"}/knowledge/download/${encodeURIComponent(a.id)}`,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-indigo-600 hover:text-indigo-900 hover:underline",children:a.source||a.id}):"jira_ticket"===c?(0,b.jsx)("button",{onClick:()=>w(a.file_type,a.id),className:"font-medium text-indigo-600 hover:text-indigo-900 hover:underline text-left",children:a.id}):(0,b.jsx)("span",{className:"font-medium text-gray-900",children:a.source||a.id})}),"jira_ticket"===c&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:(0,b.jsx)("span",{className:"inline-flex items-center rounded-md bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 ring-1 ring-inset ring-blue-700/10",children:a.issuetype})}),(0,b.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:(0,b.jsx)("span",{className:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20",children:a.status})})]}),(0,b.jsx)("td",{className:"px-3 py-4 text-sm text-gray-500 max-w-md truncate",children:a.preview}),(0,b.jsxs)("td",{className:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6",children:[(0,b.jsx)("button",{onClick:()=>w(a.file_type,a.id),className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"View"}),(0,b.jsx)("button",{onClick:()=>v(a.file_type,a.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},a.id))})]})});return(0,b.jsxs)(d.MainLayout,{children:[(0,b.jsxs)("div",{className:"p-8",children:[(0,b.jsxs)("div",{className:"sm:flex sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{className:"sm:flex-auto",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Knowledge Base"}),(0,b.jsx)("p",{className:"mt-2 text-sm text-gray-700",children:"Manage documents and JIRA history for RAG-powered request creation."})]}),(0,b.jsx)("div",{className:"mt-4 sm:ml-16 sm:mt-0 sm:flex-none",children:(0,b.jsxs)("label",{htmlFor:"file-upload",className:"inline-flex items-center gap-x-2 rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 cursor-pointer",children:[(0,b.jsx)(e.PlusIcon,{className:"-ml-0.5 h-5 w-5","aria-hidden":"true"}),"Upload File",(0,b.jsx)("input",{id:"file-upload",type:"file",className:"sr-only",accept:".pdf,.txt,.md,.csv,.doc,.docx,.ppt,.pptx",onChange:a=>a.target.files?.[0]&&x(a.target.files[0]),disabled:q})]})})]}),o&&(0,b.jsx)("div",{className:`mt-6 rounded-md p-4 ${o.includes("Failed")?"bg-red-50 text-red-800":"bg-green-50 text-green-800"}`,children:(0,b.jsx)("p",{className:"text-sm font-medium",children:o})}),(0,b.jsx)("div",{className:"mt-8",children:(0,b.jsxs)(g.Tab.Group,{children:[(0,b.jsx)(g.Tab.List,{className:"flex space-x-1 rounded-xl bg-blue-900/20 p-1 max-w-md",children:["Documents","JIRA History"].map(c=>(0,b.jsxs)(g.Tab,{className:({selected:a})=>(function(...a){return a.filter(Boolean).join(" ")})("w-full rounded-lg py-2.5 text-sm font-medium leading-5","ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2",a?"bg-white text-blue-700 shadow":"text-blue-100 hover:bg-white/[0.12] hover:text-white"),children:[c," (","Documents"===c?a.length:k.length,")"]},c))}),(0,b.jsxs)(g.Tab.Panels,{className:"mt-6",children:[(0,b.jsx)(g.Tab.Panel,{children:y(a,"document")}),(0,b.jsx)(g.Tab.Panel,{children:y(k,"jira_ticket")})]})]})})]}),(0,b.jsx)(i.Transition,{appear:!0,show:s.open,as:c.Fragment,children:(0,b.jsxs)(h.Dialog,{as:"div",className:"relative z-10",onClose:()=>t({open:!1,item:null}),children:[(0,b.jsx)(i.Transition.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,b.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,b.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,b.jsx)(i.Transition.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,b.jsxs)(h.Dialog.Panel,{className:"w-full max-w-3xl transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[(0,b.jsx)(h.Dialog.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 mb-4",children:s.item?.source||s.item?.id}),s.item?.type==="jira_ticket"&&(0,b.jsxs)("div",{className:"mb-4 flex gap-2",children:[(0,b.jsx)("span",{className:"inline-flex items-center rounded-md bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 ring-1 ring-inset ring-blue-700/10",children:s.item.issuetype}),(0,b.jsx)("span",{className:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20",children:s.item.status})]}),(0,b.jsx)("div",{className:"mt-2 max-h-96 overflow-y-auto",children:(0,b.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-gray-700 bg-gray-50 p-4 rounded-lg",children:s.item?.content})}),(0,b.jsx)("div",{className:"mt-6",children:(0,b.jsx)("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:()=>t({open:!1,item:null}),children:"Close"})})]})})})})]})})]})}a.s(["default",()=>j],78128)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__1e311647._.js.map
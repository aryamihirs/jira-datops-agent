{"version":3,"sources":["../../../../app/requests/page.tsx","../../../../components/requests/RequestModal.tsx","../../../../node_modules/%40heroicons/react/24/outline/esm/XMarkIcon.js","../../../../node_modules/%40heroicons/react/24/outline/esm/FunnelIcon.js","../../../../node_modules/%40heroicons/react/24/outline/esm/LockClosedIcon.js","../../../../node_modules/%40heroicons/react/24/outline/esm/LockOpenIcon.js"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { MainLayout } from '@/components/layout/MainLayout';\nimport { RequestModal } from '@/components/requests/RequestModal';\nimport { api } from '@/lib/api/client';\nimport { Request } from '@/lib/types';\nimport { PlusIcon, FunnelIcon, LockClosedIcon, LockOpenIcon } from '@heroicons/react/24/outline';\n\nexport default function RequestsPage() {\n  const [requests, setRequests] = useState<Request[]>([]);\n  const [selectedRequest, setSelectedRequest] = useState<Request | null>(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [filterStatus, setFilterStatus] = useState<string>('');\n  const [isLoading, setIsLoading] = useState(true);\n  const [selectedIds, setSelectedIds] = useState<number[]>([]);\n  const [isReleasing, setIsReleasing] = useState(false);\n\n  // Computed state for release button eligibility\n  const selectedRequests = requests.filter(r => selectedIds.includes(r.id));\n  const canRelease = selectedRequests.length > 0 && selectedRequests.every(r => r.status === 'Approved' && !r.jira_issue_key);\n\n  const fetchRequests = async () => {\n    try {\n      setIsLoading(true);\n      const data = await api.getRequests(filterStatus ? { status: filterStatus } : undefined);\n      setRequests(data);\n    } catch (error) {\n      console.error('Failed to fetch requests', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchRequests();\n    setSelectedIds([]); // Reset selection on filter change\n  }, [filterStatus]);\n\n  const handleRowClick = (request: Request) => {\n    setSelectedRequest(request);\n    setIsModalOpen(true);\n  };\n\n  const toggleSelection = (e: React.MouseEvent, id: number) => {\n    e.stopPropagation();\n    setSelectedIds(prev =>\n      prev.includes(id) ? prev.filter(item => item !== id) : [...prev, id]\n    );\n  };\n\n  const handleSelectAll = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.checked) {\n      setSelectedIds(requests.map(r => r.id));\n    } else {\n      setSelectedIds([]);\n    }\n  };\n\n  const handleRelease = async () => {\n    if (!canRelease) return;\n\n    if (!confirm(`Are you sure you want to release ${selectedIds.length} request(s) to JIRA?`)) return;\n\n    setIsReleasing(true);\n    try {\n      const result = await api.releaseRequests(selectedIds);\n      alert(`Release Complete!\\nSuccess: ${result.success}\\nFailed: ${result.failed}\\nSkipped: ${result.skipped}`);\n      fetchRequests();\n      setSelectedIds([]);\n    } catch (error) {\n      console.error('Release failed', error);\n      alert('Failed to release requests to JIRA.');\n    } finally {\n      setIsReleasing(false);\n    }\n  };\n\n  const handleExportCSV = async () => {\n    try {\n      await api.exportRequestsCSV();\n    } catch (error) {\n      console.error('Failed to export CSV', error);\n    }\n  };\n\n  return (\n    <MainLayout>\n      <div className=\"p-8\">\n        <div className=\"sm:flex sm:items-center\">\n          <div className=\"sm:flex-auto\">\n            <h1 className=\"text-2xl font-bold text-gray-900\">Requests</h1>\n            <p className=\"mt-2 text-sm text-gray-700\">\n              Manage and review incoming JIRA requests from various channels.\n            </p>\n          </div>\n          <div className=\"mt-4 sm:ml-16 sm:mt-0 sm:flex-none flex space-x-3\">\n            <button\n              type=\"button\"\n              onClick={handleRelease}\n              disabled={!canRelease || isReleasing}\n              className={`inline-flex items-center gap-x-1.5 rounded-md px-3 py-2 text-sm font-semibold shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 ${canRelease\n                ? 'bg-green-600 text-white hover:bg-green-500'\n                : 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                }`}\n            >\n              {canRelease ? (\n                <LockOpenIcon className=\"-ml-0.5 h-5 w-5\" aria-hidden=\"true\" />\n              ) : (\n                <LockClosedIcon className=\"-ml-0.5 h-5 w-5\" aria-hidden=\"true\" />\n              )}\n              {isReleasing ? 'Releasing...' : 'Release to JIRA'}\n            </button>\n\n            <button\n              type=\"button\"\n              onClick={handleExportCSV}\n              className=\"block rounded-md bg-white px-3 py-2 text-center text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50\"\n            >\n              Export CSV\n            </button>\n            <button\n              type=\"button\"\n              id=\"new-request-btn\"\n              onClick={() => {\n                setSelectedRequest(null);\n                setIsModalOpen(true);\n              }}\n              className=\"block rounded-md bg-indigo-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\"\n            >\n              <PlusIcon className=\"h-5 w-5 inline-block mr-1\" />\n              New Request\n            </button>\n          </div>\n        </div>\n\n        {/* Filters */}\n        <div className=\"mt-4 flex items-center space-x-4\">\n          <div className=\"flex items-center\">\n            <FunnelIcon className=\"h-5 w-5 text-gray-400 mr-2\" />\n            <select\n              value={filterStatus}\n              onChange={(e) => setFilterStatus(e.target.value)}\n              className=\"block w-full rounded-md border-0 py-1.5 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n            >\n              <option value=\"\">All Statuses</option>\n              <option value=\"Under Review\">Under Review</option>\n              <option value=\"Approved\">Approved</option>\n              <option value=\"Rejected\">Rejected</option>\n              <option value=\"Released\">Released</option>\n            </select>\n          </div>\n        </div>\n\n        {/* Table */}\n        <div className=\"mt-8 flow-root\">\n          <div className=\"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8\">\n            <div className=\"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8\">\n              <div className=\"overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg\">\n                <table className=\"min-w-full divide-y divide-gray-300\">\n                  <thead className=\"bg-gray-50\">\n                    <tr>\n                      <th scope=\"col\" className=\"relative px-7 sm:w-12 sm:px-6\">\n                        <input\n                          type=\"checkbox\"\n                          className=\"absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600\"\n                          checked={requests.length > 0 && selectedIds.length === requests.length}\n                          onChange={handleSelectAll}\n                        />\n                      </th>\n                      <th scope=\"col\" className=\"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6\">\n                        Summary\n                      </th>\n                      <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">\n                        Status\n                      </th>\n                      <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">\n                        Source\n                      </th>\n                      <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">\n                        Requestor\n                      </th>\n                      <th scope=\"col\" className=\"px-3 py-3.5 text-left text-sm font-semibold text-gray-900\">\n                        Created At\n                      </th>\n                      <th scope=\"col\" className=\"relative py-3.5 pl-3 pr-4 sm:pr-6\">\n                        <span className=\"sr-only\">Edit</span>\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"divide-y divide-gray-200 bg-white\">\n                    {isLoading ? (\n                      <tr>\n                        <td colSpan={7} className=\"text-center py-4\">Loading...</td>\n                      </tr>\n                    ) : requests.length === 0 ? (\n                      <tr>\n                        <td colSpan={7} className=\"text-center py-4 text-gray-500\">No requests found</td>\n                      </tr>\n                    ) : (\n                      requests.map((request) => {\n                        const isReleased = !!request.jira_issue_key;\n                        const rowClass = isReleased\n                          ? 'bg-gray-100 text-gray-500 hover:bg-gray-100'\n                          : 'hover:bg-gray-50 cursor-pointer';\n\n                        return (\n                          <tr\n                            key={request.id}\n                            className={rowClass}\n                            onClick={() => !isReleased && handleRowClick(request)}\n                          >\n                            <td className=\"relative px-7 sm:w-12 sm:px-6\">\n                              <input\n                                type=\"checkbox\"\n                                className=\"absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600\"\n                                checked={selectedIds.includes(request.id)}\n                                onClick={(e) => toggleSelection(e, request.id)}\n                                disabled={isReleased}\n                              />\n                            </td>\n                            <td className=\"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium sm:pl-6\">\n                              {request.summary}\n                              {isReleased && <span className=\"ml-2 text-xs text-gray-400\">({request.jira_issue_key})</span>}\n                            </td>\n                            <td className=\"whitespace-nowrap px-3 py-4 text-sm\">\n                              <span className={`inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset ${request.status === 'Approved' ? 'bg-green-50 text-green-700 ring-green-600/20' :\n                                request.status === 'Rejected' ? 'bg-red-50 text-red-700 ring-red-600/20' :\n                                  request.status === 'Released' ? 'bg-gray-100 text-gray-600 ring-gray-400/20' :\n                                    'bg-yellow-50 text-yellow-700 ring-yellow-600/20'\n                                }`}>\n                                {request.status}\n                              </span>\n                            </td>\n                            <td className=\"whitespace-nowrap px-3 py-4 text-sm\">{request.source_tag}</td>\n                            <td className=\"whitespace-nowrap px-3 py-4 text-sm\">{request.requestor || '-'}</td>\n                            <td className=\"whitespace-nowrap px-3 py-4 text-sm\">\n                              {new Date(request.created_at).toLocaleDateString()}\n                            </td>\n                            <td className=\"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6\">\n                              {!isReleased ? (\n                                <button className=\"text-indigo-600 hover:text-indigo-900\" onClick={(e) => { e.stopPropagation(); handleRowClick(request); }}>\n                                  View<span className=\"sr-only\">, {request.summary}</span>\n                                </button>\n                              ) : (\n                                <span className=\"text-gray-400\">View</span>\n                              )}\n                            </td>\n                          </tr>\n                        );\n                      })\n                    )}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <RequestModal\n          isOpen={isModalOpen}\n          onClose={() => setIsModalOpen(false)}\n          request={selectedRequest}\n          onUpdate={fetchRequests}\n        />\n      </div>\n    </MainLayout>\n  );\n}\n","import { Fragment, useState, useEffect } from 'react';\nimport { Dialog, Transition } from '@headlessui/react';\nimport { XMarkIcon } from '@heroicons/react/24/outline';\nimport { Request, Connection } from '@/lib/types';\nimport { api } from '@/lib/api/client';\n\ninterface RequestModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    request: Request | null;\n    onUpdate: () => void;\n}\n\nexport function RequestModal({ isOpen, onClose, request, onUpdate }: RequestModalProps) {\n    const [formData, setFormData] = useState<Partial<Request>>({});\n    const [isCreating, setIsCreating] = useState(false);\n    const [connections, setConnections] = useState<Connection[]>([]);\n    const [activeConnection, setActiveConnection] = useState<Connection | null>(null);\n    const [selectedIssueType, setSelectedIssueType] = useState<string>('');\n    const [dynamicFields, setDynamicFields] = useState<Record<string, any>>({});\n    const [isAnalyzing, setIsAnalyzing] = useState(false);\n    const [showJiraDetails, setShowJiraDetails] = useState(false);\n\n    useEffect(() => {\n        const loadConnections = async () => {\n            try {\n                const data = await api.getConnections();\n                setConnections(data);\n                // Find active JIRA connection\n                const jiraConn = data.find(c => c.type === 'jira' && c.status === 'active');\n                if (jiraConn) {\n                    setActiveConnection(jiraConn);\n                    if (jiraConn.field_config) {\n                        const issueTypes = Object.keys(jiraConn.field_config);\n                        if (issueTypes.length > 0) {\n                            setSelectedIssueType(issueTypes[0]);\n                        }\n                    }\n                }\n            } catch (error) {\n                console.error('Failed to load connections', error);\n            }\n        };\n        loadConnections();\n    }, [isOpen]);\n\n    useEffect(() => {\n        if (request) {\n            setFormData(request);\n            setIsCreating(false);\n            setShowJiraDetails(true); // Always show details for existing requests\n            // If editing, try to populate dynamic fields from source_content if available\n            if (request.source_content && request.source_content.jira_fields) {\n                setDynamicFields(request.source_content.jira_fields);\n                if (request.source_content.issue_type) {\n                    setSelectedIssueType(request.source_content.issue_type);\n                }\n            }\n        } else {\n            setFormData({\n                source_tag: 'manual',\n                status: 'Under Review'\n            });\n            setIsCreating(true);\n            setShowJiraDetails(false); // Hide initially for new requests\n            setDynamicFields({});\n        }\n    }, [request, isOpen]);\n\n    // Helper to construct schema for AI\n    const getJiraSchema = (issueType: string) => {\n        if (!activeConnection?.field_config || !issueType) return null;\n\n        const config = activeConnection.field_config[issueType];\n        if (!config || !config.fields) return null;\n\n        const schema: Record<string, string> = {};\n\n        Object.entries(config.fields).forEach(([key, field]: [string, any]) => {\n            if (field.included) {\n                // Create a description for the AI based on field type and name\n                let description = field.name;\n                if (field.required) description += \" (Required)\";\n                if (field.type === 'array') description += \" (List of values)\";\n\n                schema[key] = description;\n            }\n        });\n\n        return schema;\n    };\n\n    const handleAnalyze = async () => {\n        if (!formData.description) return;\n\n        setIsAnalyzing(true);\n        try {\n            // Determine issue type (default to first available if not set)\n            let currentIssueType = selectedIssueType;\n            if (!currentIssueType && activeConnection?.field_config) {\n                const types = Object.keys(activeConnection.field_config);\n                if (types.length > 0) {\n                    currentIssueType = types[0];\n                    setSelectedIssueType(currentIssueType);\n                }\n            }\n\n            // Get current JIRA schema to guide the AI\n            const jiraSchema = getJiraSchema(currentIssueType);\n            console.log('Sending JIRA Schema to AI:', jiraSchema);\n\n            // Call analyze endpoint with schema\n            const result = await api.analyzeRequest(formData.description, undefined, jiraSchema || undefined);\n\n            console.log('AI Analysis Result:', result);\n\n            // Map fields directly since AI now uses our schema keys\n            setDynamicFields(prev => ({ ...prev, ...result }));\n\n            // Update main form data\n            setFormData(prev => ({\n                ...prev,\n                summary: result.summary || prev.summary,\n            }));\n\n            // Switch to details tab\n            setShowJiraDetails(true);\n        } catch (error) {\n            console.error('Failed to analyze request', error);\n            alert('Failed to analyze request. Please try again.');\n        } finally {\n            setIsAnalyzing(false);\n        }\n    };\n\n    const handleSave = async () => {\n        try {\n            console.log('Saving request...', formData);\n            const dataToSave = {\n                source_tag: 'manual', // Ensure default matches backend expectation\n                ...formData,\n                source_content: {\n                    ...formData.source_content,\n                    issue_type: selectedIssueType,\n                    jira_fields: dynamicFields\n                }\n            };\n\n            if (isCreating) {\n                console.log('Creating request with data:', dataToSave);\n                await api.createRequest(dataToSave);\n            } else if (request) {\n                console.log('Updating request with data:', dataToSave);\n                await api.updateRequest(request.id, dataToSave);\n            }\n            onUpdate();\n            onClose();\n        } catch (error) {\n            console.error('Failed to save request', error);\n            alert(`Failed to save request: ${error instanceof Error ? error.message : String(error)}`);\n        }\n    };\n\n    const handleApprove = async () => {\n        if (!request) return;\n        try {\n            await api.approveRequest(request.id);\n            onUpdate();\n            onClose();\n        } catch (error) {\n            console.error('Failed to approve request', error);\n        }\n    };\n\n    const handleReject = async () => {\n        if (!request) return;\n        try {\n            await api.rejectRequest(request.id);\n            onUpdate();\n            onClose();\n        } catch (error) {\n            console.error('Failed to reject request', error);\n        }\n    };\n\n    const renderDynamicField = (fieldKey: string, field: any) => {\n        // Skip if not included\n        if (field.included === false) return null;\n\n        const isRequired = field.required || field.custom_required;\n        const label = field.name;\n\n        // Handle different field types\n        // This is a basic implementation - can be expanded for specific JIRA types\n        return (\n            <div key={fieldKey} className=\"sm:col-span-6\">\n                <label className=\"block text-sm font-medium leading-6 text-gray-900\">\n                    {label} {isRequired && <span className=\"text-red-500\">*</span>}\n                </label>\n                <div className=\"mt-2\">\n                    <input\n                        type=\"text\"\n                        required={isRequired}\n                        className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n                        value={dynamicFields[fieldKey] || ''}\n                        onChange={(e) => setDynamicFields({ ...dynamicFields, [fieldKey]: e.target.value })}\n                    />\n                </div>\n            </div>\n        );\n    };\n\n    return (\n        <Transition.Root show={isOpen} as={Fragment}>\n            <Dialog as=\"div\" className=\"relative z-50\" onClose={onClose}>\n                <Transition.Child\n                    as={Fragment}\n                    enter=\"ease-out duration-300\"\n                    enterFrom=\"opacity-0\"\n                    enterTo=\"opacity-100\"\n                    leave=\"ease-in duration-200\"\n                    leaveFrom=\"opacity-100\"\n                    leaveTo=\"opacity-0\"\n                >\n                    <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\" />\n                </Transition.Child>\n\n                <div className=\"fixed inset-0 z-10 overflow-y-auto\">\n                    <div className=\"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0\">\n                        <Transition.Child\n                            as={Fragment}\n                            enter=\"ease-out duration-300\"\n                            enterFrom=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n                            enterTo=\"opacity-100 translate-y-0 sm:scale-100\"\n                            leave=\"ease-in duration-200\"\n                            leaveFrom=\"opacity-100 translate-y-0 sm:scale-100\"\n                            leaveTo=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n                        >\n                            <Dialog.Panel className=\"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-4xl sm:p-6\">\n                                <div className=\"absolute right-0 top-0 hidden pr-4 pt-4 sm:block\">\n                                    <button\n                                        type=\"button\"\n                                        className=\"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\"\n                                        onClick={onClose}\n                                    >\n                                        <span className=\"sr-only\">Close</span>\n                                        <XMarkIcon className=\"h-6 w-6\" aria-hidden=\"true\" />\n                                    </button>\n                                </div>\n\n                                <div className=\"sm:flex sm:items-start w-full\">\n                                    <div className=\"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left w-full\">\n                                        <Dialog.Title as=\"h3\" className=\"text-base font-semibold leading-6 text-gray-900\">\n                                            {isCreating ? 'New Request' : `Request Details: ${request?.summary}`}\n                                        </Dialog.Title>\n\n                                        {/* Tabs for Navigation */}\n                                        <div className=\"mt-4 border-b border-gray-200\">\n                                            <nav className=\"-mb-px flex space-x-8\" aria-label=\"Tabs\">\n                                                <button\n                                                    onClick={() => setShowJiraDetails(false)}\n                                                    className={`${!showJiraDetails\n                                                        ? 'border-indigo-500 text-indigo-600'\n                                                        : 'border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700'\n                                                        } whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium`}\n                                                >\n                                                    Context & Assets\n                                                </button>\n                                                <button\n                                                    onClick={() => setShowJiraDetails(true)}\n                                                    disabled={!activeConnection}\n                                                    className={`${showJiraDetails\n                                                        ? 'border-indigo-500 text-indigo-600'\n                                                        : 'border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700'\n                                                        } whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed`}\n                                                >\n                                                    JIRA Details\n                                                </button>\n                                            </nav>\n                                        </div>\n\n                                        <div className=\"mt-6\">\n                                            {/* Context & Assets Tab */}\n                                            {!showJiraDetails && (\n                                                <div className=\"space-y-6 animate-in fade-in slide-in-from-left-4 duration-300\">\n                                                    <div>\n                                                        <label className=\"block text-sm font-medium leading-6 text-gray-900\">\n                                                            Request Context\n                                                        </label>\n                                                        <p className=\"mt-1 text-sm text-gray-500\">\n                                                            Describe the task or request in detail. The AI agent will extract the necessary information.\n                                                        </p>\n                                                        <div className=\"mt-2\">\n                                                            <textarea\n                                                                rows={6}\n                                                                className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n                                                                placeholder=\"e.g. Please create a JIRA ticket for fixing the login bug reported by Sarah. See attached screenshot...\"\n                                                                value={formData.description || ''}\n                                                                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                                                            />\n                                                        </div>\n                                                    </div>\n\n                                                    <div>\n                                                        <label className=\"block text-sm font-medium leading-6 text-gray-900\">\n                                                            Assets\n                                                        </label>\n                                                        <div className=\"mt-2 flex justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10\">\n                                                            <div className=\"text-center\">\n                                                                <div className=\"mt-4 flex text-sm leading-6 text-gray-600\">\n                                                                    <label\n                                                                        htmlFor=\"file-upload\"\n                                                                        className=\"relative cursor-pointer rounded-md bg-white font-semibold text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-600 focus-within:ring-offset-2 hover:text-indigo-500\"\n                                                                    >\n                                                                        <span>Upload files</span>\n                                                                        <input id=\"file-upload\" name=\"file-upload\" type=\"file\" className=\"sr-only\" multiple />\n                                                                    </label>\n                                                                    <p className=\"pl-1\">or drag and drop</p>\n                                                                </div>\n                                                                <p className=\"text-xs leading-5 text-gray-600\">Emails, Screenshots, Documents</p>\n                                                            </div>\n                                                        </div>\n                                                    </div>\n\n                                                    <div className=\"flex justify-end pt-4 border-t border-gray-100\">\n                                                        <button\n                                                            type=\"button\"\n                                                            disabled={isAnalyzing || !formData.description}\n                                                            className=\"inline-flex items-center gap-x-2 rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed\"\n                                                            onClick={handleAnalyze}\n                                                        >\n                                                            {isAnalyzing ? (\n                                                                <>\n                                                                    <div className=\"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent\" />\n                                                                    Analyzing...\n                                                                </>\n                                                            ) : (\n                                                                <>\n                                                                    Analyze & Generate Fields\n                                                                </>\n                                                            )}\n                                                        </button>\n                                                    </div>\n                                                </div>\n                                            )}\n\n                                            {/* JIRA Details Tab */}\n                                            {showJiraDetails && (\n                                                <div className=\"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300\">\n                                                    {activeConnection ? (\n                                                        <>\n                                                            <div className=\"grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6\">\n\n                                                                {/* Issue Type Selector */}\n                                                                <div className=\"sm:col-span-6\">\n                                                                    <label className=\"block text-sm font-medium leading-6 text-gray-900\">\n                                                                        Issue Type <span className=\"text-red-500\">*</span>\n                                                                    </label>\n                                                                    <div className=\"mt-2\">\n                                                                        <select\n                                                                            value={selectedIssueType}\n                                                                            onChange={(e) => setSelectedIssueType(e.target.value)}\n                                                                            className=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n                                                                        >\n                                                                            {activeConnection.field_config && Object.keys(activeConnection.field_config).map((type) => (\n                                                                                <option key={type} value={type}>{type}</option>\n                                                                            ))}\n                                                                        </select>\n                                                                    </div>\n                                                                </div>\n\n                                                                {/* Dynamic Fields Grid */}\n                                                                {selectedIssueType && activeConnection.field_config && activeConnection.field_config[selectedIssueType] ? (\n                                                                    Object.entries(activeConnection.field_config[selectedIssueType].fields)\n                                                                        .sort(([, a]: [string, any], [, b]: [string, any]) => {\n                                                                            if (a.required !== b.required) return a.required ? -1 : 1;\n                                                                            return a.name.localeCompare(b.name);\n                                                                        })\n                                                                        .map(([fieldKey, field]: [string, any]) => renderDynamicField(fieldKey, field))\n                                                                ) : (\n                                                                    <div className=\"sm:col-span-6 text-center text-gray-500 py-4\">\n                                                                        No fields configured for this issue type.\n                                                                    </div>\n                                                                )}\n                                                            </div>\n                                                        </>\n                                                    ) : (\n                                                        <div className=\"text-center py-10 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300\">\n                                                            <p className=\"text-gray-500\">No active JIRA connection found.</p>\n                                                            <p className=\"text-sm text-gray-400 mt-1\">Please configure a connection in settings.</p>\n                                                        </div>\n                                                    )}\n\n                                                    {/* Source Content (Read Only) - Only show if present */}\n                                                    {request?.source_content && (\n                                                        <div className=\"sm:col-span-6\">\n                                                            <label className=\"block text-sm font-medium leading-6 text-gray-900\">Source Content</label>\n                                                            <div className=\"mt-2 p-3 bg-gray-50 rounded-md text-sm text-gray-700 max-h-40 overflow-y-auto\">\n                                                                <pre className=\"whitespace-pre-wrap font-sans\">\n                                                                    {JSON.stringify(request.source_content, null, 2)}\n                                                                </pre>\n                                                            </div>\n                                                        </div>\n                                                    )}\n                                                </div>\n                                            )}\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div className=\"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse\">\n                                    {!isCreating && (\n                                        <>\n                                            <button\n                                                type=\"button\"\n                                                className=\"inline-flex w-full justify-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500 sm:ml-3 sm:w-auto\"\n                                                onClick={handleApprove}\n                                            >\n                                                Approve\n                                            </button>\n                                            <button\n                                                type=\"button\"\n                                                className=\"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto\"\n                                                onClick={handleReject}\n                                            >\n                                                Reject\n                                            </button>\n                                        </>\n                                    )}\n                                    {/* Only show Save/Create if JIRA details are visible (meaning analysis is done or skipped) */}\n                                    {showJiraDetails && (\n                                        <button\n                                            type=\"button\"\n                                            className=\"inline-flex w-full justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 sm:ml-3 sm:w-auto\"\n                                            onClick={handleSave}\n                                        >\n                                            {isCreating ? 'Create Request' : 'Save Changes'}\n                                        </button>\n                                    )}\n                                    <button\n                                        type=\"button\"\n                                        className=\"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto\"\n                                        onClick={onClose}\n                                    >\n                                        Cancel\n                                    </button>\n                                </div>\n                            </Dialog.Panel>\n                        </Transition.Child>\n                    </div>\n                </div>\n            </Dialog>\n        </Transition.Root>\n    );\n}\n","import * as React from \"react\";\nfunction XMarkIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M6 18 18 6M6 6l12 12\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(XMarkIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction FunnelIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(FunnelIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction LockClosedIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(LockClosedIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction LockOpenIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M13.5 10.5V6.75a4.5 4.5 0 1 1 9 0v3.75M3.75 21.75h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H3.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(LockOpenIcon);\nexport default ForwardRef;"],"names":[],"mappings":"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","ignoreList":[2,3,4,5]}